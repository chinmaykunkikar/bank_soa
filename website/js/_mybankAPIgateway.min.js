var _mybankAPIgateway=angular.module("_mybankAPIgateway",[]);_mybankAPIgateway.controller("_mybankAPIgatewayController",["$scope","$http",function(e,a){e.customer={},e.account={},e.moneytransfer={},e.reset={},e.data={query:"SELECT CONCAT('[', GROUP_CONCAT(JSON_OBJECT(%fields%)), ']') as jsonresult from %TABLE_NAME%;",querytype:0,queryresponse:"",eventquery:"SELECT CONCAT('[', GROUP_CONCAT(JSON_OBJECT('eventsource',eventsource,'eventdestination',eventdestination,'eventstatus',eventstatus,'eventdirection',eventdirection,'eventdata',eventdata,'createdate',createdate) order by createdate desc), ']') as jsonresult from tEvents;"},e.data.querytemplate={create:"INSERT INTO %TABLE_NAME% (%fields%) VALUES (%values%);",delete:"DELETE FROM %TABLE_NAME% WHERE _ID in (%ID_LIST%);",update:"UPDATE %TABLE_NAME% SET %fields% WHERE _id = %_ID%;",read:"SELECT CONCAT('[', GROUP_CONCAT(JSON_OBJECT(%fields%)), ']') as jsonresult from %TABLE_NAME%;"},e.data.customer={tablename:"tCustomer",insertfields:"customername,customeraddress,customerphone",selectfields:"'_ID',_ID,'customername',customername,'customeraddress',customeraddress,'customerphone',customerphone"},e.data.account={tablename:"tAccount",insertfields:"accountname,accountbalance",selectfields:"'_ID',_ID,'accountname',accountname,'accountbalance',accountbalance"},e.data.moneytransfer={tablename:"tMoneyTransfer",insertfields:"fromaccount,toaccount,amount",selectfields:"'_ID',_ID,'createdate',createdate,'fromaccount',fromaccount,'toaccount',toaccount,'amount',amount"},e.customer.executequery=function(){a({method:"POST",url:"http://localhost:8081/mybank/customer/executequery/",dataType:"json",data:{query:e.data.query,querytype:e.data.querytype},headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(function(a){e.msg="Customer POST data submitted successfully!",e.data.queryresponse=a.data},function(a){e.msg="Service does not exist (Customer) "+a.data,e.statusval=a.status,e.statustext=a.statusText,e.headers=a.headers()})},e.account.executequery=function(){a({method:"POST",url:"http://localhost:8082/mybank/account/executequery/",dataType:"json",data:{query:e.data.query,querytype:e.data.querytype},headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(function(a){e.msg="Accounts POST data submitted successfully!",e.data.queryresponse=a.data},function(a){e.msg="Service does not exist (Accounts) "+a.data,e.statusval=a.status,e.statustext=a.statusText,e.headers=a.headers()})},e.moneytransfer.executequery=function(){a({method:"POST",url:"http://localhost:8083/mybank/moneytransfer/executequery/",dataType:"json",data:{query:e.data.query,querytype:e.data.querytype},headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(function(a){e.msg="MoneyTransfer POST data submitted successfully!",e.data.queryresponse=a.data},function(a){e.msg="Service does not exist (MoneyTransfer) "+a.data,e.statusval=a.status,e.statustext=a.statusText,e.headers=a.headers()})},e.data.customer.selectquery=function(){e.data.query=e.data.querytemplate.read,e.data.querytype=0,e.data.query=e.data.query.replace(/%TABLE_NAME%/,e.data.customer.tablename),e.data.query=e.data.query.replace(/%fields%/,e.data.customer.selectfields),e.customer.executequery(),e.showcustomertable=1},e.data.customer.insertquery=function(){var a="";e.data.query=e.data.querytemplate.create,e.data.querytype=1,e.data.query=e.data.query.replace(/%TABLE_NAME%/,e.data.customer.tablename),e.data.query=e.data.query.replace(/%fields%/,e.data.customer.insertfields),a="'"+e.form.customer.name+"','"+e.form.customer.address+"','"+e.form.customer.phone+"','0'",e.data.query=e.data.query.replace(/%values%/,a),e.customer.executequery(),e.form.customer=angular.copy(e.reset)},e.data.customer.deletequery=function(){e.data.query=e.data.querytemplate.delete,e.data.querytype=1,e.data.query=e.data.query.replace(/%TABLE_NAME%/,e.data.customer.tablename),e.data.query=e.data.query.replace(/%ID_LIST%/,e.form.customer._ID),e.customer.executequery(),e.form.customer=angular.copy(e.reset)},e.data.customer.updatequery=function(){e.data.query=e.data.querytemplate.update,e.data.querytype=1,e.data.customer.updatefields="customername='"+e.form.customer.name+"'",e.data.query=e.data.query.replace(/%TABLE_NAME%/,e.data.customer.tablename),e.data.query=e.data.query.replace(/%fields%/,e.data.customer.updatefields),e.data.query=e.data.query.replace(/%_ID%/,e.form.customer._ID),e.customer.executequery(),e.form.customer=angular.copy(e.reset)},e.data.account.selectquery=function(){e.data.query=e.data.querytemplate.read,e.data.querytype=0,e.data.query=e.data.query.replace(/%TABLE_NAME%/,e.data.account.tablename),e.data.query=e.data.query.replace(/%fields%/,e.data.account.selectfields),e.account.executequery()},e.data.account.insertquery=function(){var a="";e.data.query=e.data.querytemplate.create,e.data.querytype=1,e.data.query=e.data.query.replace(/%TABLE_NAME%/,e.data.account.tablename),e.data.query=e.data.query.replace(/%fields%/,e.data.account.insertfields),a="'"+e.form.account.name+"','"+e.form.account.balance+"'",e.data.query=e.data.query.replace(/%values%/,a),e.account.executequery(),e.form.account=angular.copy(e.reset)},e.data.account.deletequery=function(){e.data.query=e.data.querytemplate.delete,e.data.querytype=1,e.data.query=e.data.query.replace(/%TABLE_NAME%/,e.data.account.tablename),e.data.query=e.data.query.replace(/%ID_LIST%/,e.form.account._ID),e.account.executequery(),e.form.account=angular.copy(e.reset)},e.data.account.updatequery=function(){e.data.query=e.data.querytemplate.update,e.data.querytype=1,e.data.account.updatefields="accountname='"+e.form.account.name+"',accountbalance='"+e.form.account.balance+"'",e.data.query=e.data.query.replace(/%TABLE_NAME%/,e.data.account.tablename),e.data.query=e.data.query.replace(/%fields%/,e.data.account.updatefields),e.data.query=e.data.query.replace(/%_ID%/,e.form.account._ID),e.account.executequery(),e.form.account=angular.copy(e.reset)},e.data.moneytransfer.selectquery=function(){e.data.query=e.data.querytemplate.read,e.data.querytype=0,e.data.query=e.data.query.replace(/%TABLE_NAME%/,e.data.moneytransfer.tablename),e.data.query=e.data.query.replace(/%fields%/,e.data.moneytransfer.selectfields),e.moneytransfer.executequery(),e.showmoneytable=1},e.data.moneytransfer.insertquery=function(){var a="";e.data.query=e.data.querytemplate.create,e.data.querytype=1,e.data.query=e.data.query.replace(/%TABLE_NAME%/,e.data.moneytransfer.tablename),e.data.query=e.data.query.replace(/%fields%/,e.data.moneytransfer.insertfields),a="'"+e.form.moneytransfer.fromaccount+"','"+e.form.moneytransfer.toaccount+"','"+e.form.moneytransfer.amount+"'",e.data.query=e.data.query.replace(/%values%/,a),e.moneytransfer.executequery(),e.form.moneytransfer=angular.copy(e.reset)},e.data.account.vieweventlog=function(){a({method:"POST",url:"http://localhost:8082/mybank/account/executequery/",dataType:"json",data:{query:e.data.eventquery,querytype:0},headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(function(a){e.msg="EventLog POST data submitted successfully!",e.account.eventlog=a.data},function(a){e.msg="Service does not exist (EventLog) "+a.data,e.statusval=a.status,e.statustext=a.statusText,e.headers=a.headers()})}}]);